<div class="m-4" *ngIf="pokemon && pokemonSpecie && evolutionChain">
  <app-pokemon-info
    [language]="language"
    [pokemon]="pokemon"
    [pokemonSpecie]="pokemonSpecie"
    >
  </app-pokemon-info>

  <!-- Sección de descripcion pokedex -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold text-xl">{{ language === 'es' ? 'Descripción Pokédex': 'Pokédex Entries' }}</h1>
    <div class="border-black border p-3 rounded-md">
      <div class="grid grid-cols-6 gap-4 border-b border-black pb-1">
        <span class="text-center font-semibold col-span-1">{{ language === 'es' ? 'Juego': 'Game' }}</span>
        <span class="font-semibold col-span-5">{{ language === 'es' ? 'Descipción': 'Description' }}</span>
      </div>
      <div class="grid grid-cols-4">
        <div *ngFor="let entry of flavorTextEntries" class="col-span-4 grid grid-cols-6 gap-4 border-b border-black py-2">
          <div [ngClass]="getGameVersionColor(entry.version)" class="text-center col-span-1 rounded-md text-white border border-black">
            <span>{{ getGameName(entry.version) }}</span>
          </div>
          <div class="col-span-5">
            <p>{{ entry.flavor_text }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de numeros de pokedex -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold text-xl">{{ language === 'es' ? 'Numeros de Pokédex': 'Pokédex Numbers' }}</h1>
    <div class="grid grid-cols-4">
      <div class="col-span-1" *ngFor="let dex of pokemonSpecie.pokedex_numbers">
        <span class="font-bold">{{ language === 'es' ? 'Número': 'Number' }}: </span>{{ dex.entry_number }} - {{ dex.pokedex.name }}
      </div>
    </div>
  </div>

  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold text-xl">{{ language === 'es' ? 'Cadena Evolutiva' : 'Evolution Chain' }}</h1>
    <div class="flex justify-center space-x-8" *ngIf="evolutionChain">
      <div class="flex flex-col items-center">
        <p class="cursor-pointer hover:text-blue-500" (click)="goToPokemonPage(evolutionChain.chain.species.name)">
          {{ evolutionChain.chain.species.name | titlecase }}
        </p>
        <img class="w-48 cursor-pointer hover:opacity-80" *ngIf="evolutionChain.chain?.detailPokemon?.sprites?.other?.home?.front_default"
             (click)="goToPokemonPage(evolutionChain.chain.species.name)"
             [src]="evolutionChain.chain?.detailPokemon?.sprites?.other?.home?.front_default">
      </div>
      <ng-container *ngFor="let stage of evolutionChain.chain.evolves_to">
        <div class="flex flex-col items-center">
          <p class="cursor-pointer hover:text-blue-500" (click)="goToPokemonPage(stage.species.name)">
            {{ stage.species.name | titlecase }}
          </p>
          <img class="w-48 cursor-pointer hover:opacity-80" *ngIf="stage?.detailPokemon?.sprites?.other?.home?.front_default"
               (click)="goToPokemonPage(stage.species.name)"
               [src]="stage?.detailPokemon?.sprites?.other?.home?.front_default">
          <p *ngIf="stage.evolution_details[0]?.trigger">{{ stage.evolution_details[0]?.trigger.name }}</p>
          <p *ngIf="stage.evolution_details[0]?.time_of_day">{{ stage.evolution_details[0]?.time_of_day }}</p>
          <p *ngIf="stage.evolution_details[0]?.min_happiness">{{ stage.evolution_details[0]?.min_happiness }}</p>
          <p *ngIf="stage.evolution_details[0]?.known_move_type">{{ stage.evolution_details[0]?.known_move_type.name }} move</p>
          <p *ngIf="stage.evolution_details[0]?.min_level">{{ stage.evolution_details[0]?.min_level }}</p>
          <p *ngIf="stage.evolution_details[0]?.item">{{ stage.evolution_details[0]?.item.name }}</p>
        </div>
        <ng-container *ngFor="let stage2 of stage.evolves_to">
          <div class="flex flex-col items-center">
            <p class="cursor-pointer hover:text-blue-500" (click)="goToPokemonPage(stage2.species.name)">
              {{ stage2.species.name | titlecase }}
            </p>
            <img class="max-w-48 cursor-pointer hover:opacity-80" *ngIf="stage2?.detailPokemon?.sprites?.other?.home?.front_default"
                 (click)="goToPokemonPage(stage2.species.name)"
                 [src]="stage2?.detailPokemon?.sprites?.other?.home?.front_default">
            <p *ngIf="stage2.evolution_details[0]?.trigger">{{ stage2.evolution_details[0]?.trigger.name }}</p>
            <p *ngIf="stage2.evolution_details[0]?.time_of_day">{{ stage2.evolution_details[0]?.time_of_day }}</p>
            <p *ngIf="stage2.evolution_details[0]?.min_happiness">{{ stage2.evolution_details[0]?.min_happiness }}</p>
            <p *ngIf="stage2.evolution_details[0]?.known_move_type">{{ stage2.evolution_details[0]?.known_move_type.name }} move</p>
            <p *ngIf="stage2.evolution_details[0]?.min_level">{{ stage2.evolution_details[0]?.min_level }}</p>
            <p *ngIf="stage2.evolution_details[0]?.item">{{ stage2.evolution_details[0]?.item.name }}</p>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>

  <!-- Sección de movimientos por nivel -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold text-xl">{{ language === 'es' ? 'Movimientos Pokémon': 'Pokémon Moves' }}</h1>
    <h1 class="font-bold">{{ language === 'es' ? 'Subiendo de nivel': 'By Level Up' }}</h1>

    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="levelUpSelectedVersionGroup" (change)="levelUpChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>

    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Nivel': 'Level' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento': 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego': 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo': 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMoves" class="my-">
      <div *ngFor="let detail of pokeMove.move.version_group_details">
        <div class="grid grid-cols-4 gap-2 mb-1">
          <div class="col-span-1">
            {{ detail.level_learned_at }}
          </div>
          <div class="col-span-1">
            {{ pokeMove.moveName }}
          </div>
          <div class="grid grid-cols-3">
            <div class="col-span-2 rounded-md px-2 text-white text-center border border-black" [ngClass]="getGameVersionColor(detail.version_group.name)">
              {{ getGameName(detail.version_group.name) }}
            </div>
          </div>
          <div *ngFor="let type of pokeMove.types">
            <div class="grid grid-cols-3">
              <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                {{ type.typeName | titlecase }}
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>

  <!-- Sección de movimientos por máquina -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante Máquina Tecnica' : 'By Technical Machine' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="machineSelectedVersionGroup" (change)="machineChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByMachine">
        <div class="grid grid-cols-4 gap-2 mb-1">
          <div class="col-span-1">{{ pokeMove.moveName }}</div>
          <div class="grid grid-cols-3">
            <div class="col-span-2 rounded-md px-2 text-white text-center border border-black" [ngClass]="getGameVersionColor(pokeMove.machineDetail?.version_group.name)">
              {{ getGameName(pokeMove.machineDetail?.version_group.name) }}
            </div>
          </div>
          <div *ngFor="let type of pokeMove.types">
            <div class="grid grid-cols-3">
              <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                {{ type.typeName | titlecase }}
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Sección de movimientos por tutor -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante tutor' : 'By Tutor' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="tutorSelectedVersionGroup" (change)="tutorChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByTutor">
        <div *ngFor="let detail of pokeMove.move.version_group_details">
          <div class="grid grid-cols-4 gap-2 mb-1">
            <div class="col-span-1">{{ pokeMove.moveName }}</div>
            <div class="grid grid-cols-3">
              <div class="col-span-2 rounded-md px-2 text-white text-center border border-black" [ngClass]="getGameVersionColor(detail.version_group.name)">
                {{ getGameName(detail.version_group.name) }}
              </div>
            </div>
            <div *ngFor="let type of pokeMove.types">
              <div class="grid grid-cols-3">
                <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                  {{ type.typeName | titlecase }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de movimientos por huevo -->
  <div class="bg-gray-100 p-4 rounded-md mt-2 border border-black">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante Huevo' : 'By Egg' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="eggSelectedVersionGroup" (change)="eggChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByEgg">
        <div *ngFor="let detail of pokeMove.move.version_group_details">
          <div class="grid grid-cols-4 gap-2 mb-1">
            <div class="col-span-1">{{ pokeMove.moveName }}</div>
            <div class="grid grid-cols-3">
              <div class="col-span-2 rounded-md px-2 text-white text-center border border-black" [ngClass]="getGameVersionColor(detail.version_group.name)">
                {{ getGameName(detail.version_group.name) }}
              </div>
            </div>
            <div *ngFor="let type of pokeMove.types">
              <div class="grid grid-cols-3">
                <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                  {{ type.typeName | titlecase }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <div>
    <app-pokeSprites [pokemon]="pokemon"></app-pokeSprites>
  </div> -->

</div>
