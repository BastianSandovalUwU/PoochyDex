<div class="m-4" *ngIf="pokemon && pokemontypes">
  <div class="grid grid-cols-4">
    <div class="w-96 bg-gray-100 p-4 rounded-md col-span-1">
      <h1 class="font-bold text-2xl text-center">{{pokemon.name |titlecase}}</h1>
      <img class="w-full" *ngIf="pokemon.sprites.other.home.front_default" [src]="pokemon.sprites.other.home.front_default">
      <div *ngIf="!pokemon.sprites.other.home.front_default" class="placeholder-image text-red-500 font-bold">No Hay Imagen</div>

      <div class="grid grid-cols-4 gap-0 mt-2">
        <div class="col-span-2 col-start-2" [ngClass]="'gap-1 grid grid-cols-' + pokemon.types.length">
          <div *ngFor="let languageTypes of pokemontypes">
            <div *ngFor="let type of languageTypes">
              <div *ngIf="type.language === language" [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                {{ type.typeName | titlecase }}
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="col-span-3 bg-gray-100 p-4 rounded-md">
      <h1><span class="font-bold">{{ language === 'es' ? 'Generación': 'Generation' }}: </span>{{getGenerationName(pokemonSpecie.generation.name)}}</h1>
      <div *ngFor="let genera of pokemonSpecie.genera">
        <span *ngIf="genera.language.name === language"><span class="font-bold">{{ language === 'es' ? 'Categoria': 'Category' }}: </span>{{ genera.genus }} </span>
      </div>
      <div class="grid grid-cols-4">
        <div class="col-span-1" *ngFor="let dex of pokemonSpecie.pokedex_numbers">
          <span class="font-bold">{{ language === 'es' ? 'Número': 'Number' }}: </span>{{ dex.entry_number }} - {{ dex.pokedex.name }}
        </div>
      </div>
      <div *ngFor="let abilityGroup of filteredAbilityNames">
        <div>
          <span class="font-bold">
            {{ language === 'es' ? 'Habilidad': 'Ability' }} <span *ngIf="!abilityGroup.ability.is_hidden">{{ abilityGroup.ability.slot }}</span>
            <span *ngIf="abilityGroup.ability.is_hidden">{{ language === 'es' ? 'Oculta': 'Hidden' }}</span>:
          </span>
          <span>{{ abilityGroup.name }}</span>
        </div>
      </div>
      <div *ngFor="let eggGroup of pokemonSpecie.egg_groups">
        <span class="font-bold">{{ language === 'es' ? 'Grupo Huevo': 'Egg Group' }}: </span>{{ getEggGroupName(eggGroup.name) }}
      </div>
      <h1 class="font-bold" *ngIf="pokemonSpecie.is_legendary">Pokémon Legendario</h1>
      <h1 class="font-bold" *ngIf="pokemonSpecie.is_mythical">Pokémon Mitico</h1>
      <h1 class="font-bold" *ngIf="pokemonSpecie.is_baby">Pokémon Bebé</h1>
      <h1 *ngIf="pokemon.cries.latest" class="font-bold">{{ language === 'es' ? 'Grito Actual': 'Current Cry' }}:
        <button (click)="playAudio('audioPlayer')">|></button>
        <audio id="audioPlayer" controls>
          <source [src]="pokemon.cries.latest" type="audio/mpeg">
          Tu navegador no soporta el elemento de audio.
        </audio>
      </h1>
      <h1 *ngIf="pokemon.cries.legacy" class="font-bold">{{ language === 'es' ? 'Grito Antiguo': 'Previus Scream' }}:
        <button (click)="playAudio('audioPlayer2')">|></button>
        <audio id="audioPlayer2" controls>
          <source [src]="pokemon.cries.legacy" type="audio/mpeg">
          Tu navegador no soporta el elemento de audio.
        </audio>
      </h1>
    </div>
  </div>

  <div class="bg-gray-100 p-4 rounded-md mt-2">
    <h1 class="font-bold text-xl">{{ language === 'es' ? 'Movimientos Pokémon': 'Pokémon Moves' }}</h1>
    <h1 class="font-bold">{{ language === 'es' ? 'Subiendo de nivel': 'By Level Up' }}</h1>

    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="levelUpSelectedVersionGroup" (change)="levelUpChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>

    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Nivel': 'Level' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento': 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego': 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo': 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMoves" class="my-">
      <div *ngFor="let detail of pokeMove.move.version_group_details">
        <div class="grid grid-cols-4 gap-2 mb-1">
          <div class="col-span-1">
            {{ detail.level_learned_at }}
          </div>
          <div class="col-span-1">
            {{ pokeMove.moveName }}
          </div>
          <div class="col-span-1">
            {{ detail.version_group.name }}
          </div>
          <div *ngFor="let type of pokeMove.types">
            <div class="grid grid-cols-3">
              <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                {{ type.typeName | titlecase }}
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    </div>
  </div>

  <div class="bg-gray-100 p-4 rounded-md mt-2">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante máquina' : 'By Machine' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="machineSelectedVersionGroup" (change)="machineChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <!-- Sección de movimientos por máquina -->
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Numero Máquina' : 'Machine Number' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByMachine">
        <div class="grid grid-cols-4 gap-2 mb-1">
          <div class="col-span-1" *ngIf="pokeMove.machineDetail?.moveDetails">{{ pokeMove.machineDetail?.moveDetails.item.name }}</div>
          <div class="col-span-1">{{ pokeMove.moveName }}</div>
          <div class="col-span-1">{{ pokeMove.machineDetail?.version_group.name }}</div>
          <div *ngFor="let type of pokeMove.types">
            <div class="grid grid-cols-3">
              <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                {{ type.typeName | titlecase }}
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Sección de movimientos por tutor -->
  <div class="bg-gray-100 p-4 rounded-md mt-2">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante tutor' : 'By Tutor' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="tutorSelectedVersionGroup" (change)="tutorChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByTutor">
        <div *ngFor="let detail of pokeMove.move.version_group_details">
          <div class="grid grid-cols-4 gap-2 mb-1">
            <div class="col-span-1">{{ pokeMove.moveName }}</div>
            <div class="col-span-1">{{ detail.version_group.name }}</div>
            <div *ngFor="let type of pokeMove.types">
              <div class="grid grid-cols-3">
                <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                  {{ type.typeName | titlecase }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de movimientos por huevo -->
  <div class="bg-gray-100 p-4 rounded-md mt-2">
    <h1 class="font-bold">{{ language === 'es' ? 'Mediante Huevo' : 'By Egg' }}</h1>
    <label for="versionGroup">{{ language === 'es' ? 'Seleccionar Juego': 'Select Game' }}</label> &nbsp;
    <select id="versionGroup" [(ngModel)]="eggSelectedVersionGroup" (change)="eggChangeGame($event)">
      <option *ngFor="let group of versionGroups" [value]="group">{{ group }}</option>
    </select>
    <div class="p-3 border-black border rounded-md">
      <div class="grid grid-cols-4 gap-4 border-b border-black pb-1 mb-2">
        <span class="font-semibold">{{ language === 'es' ? 'Movimiento' : 'Move' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Juego' : 'Game' }}</span>
        <span class="font-semibold">{{ language === 'es' ? 'Tipo' : 'Type' }}</span>
      </div>
      <div *ngFor="let pokeMove of filteredMovesByEgg">
        <div *ngFor="let detail of pokeMove.move.version_group_details">
          <div class="grid grid-cols-4 gap-2 mb-1">
            <div class="col-span-1">{{ pokeMove.moveName }}</div>
            <div class="col-span-1">{{ detail.version_group.name }}</div>
            <div *ngFor="let type of pokeMove.types">
              <div class="grid grid-cols-3">
                <div [ngClass]="getColorClassByLanguageAndType(type.typeName, type.language)" class="border border-black rounded-md px-2 text-white text-center">
                  {{ type.typeName | titlecase }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div>
    <app-pokeSprites [pokemon]="pokemon"></app-pokeSprites>
  </div>

</div>
